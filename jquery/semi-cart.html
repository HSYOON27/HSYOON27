<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Jquery</title>
    <link rel="stylesheet" type="text/css" href="css/load.css">
    <link rel="stylesheet" type="text/css" href="css/reset.css">
    <link rel="stylesheet" type="text/css" href="css/commons.css">
    <link rel="stylesheet" type="text/css" href="css/layout.css">
    <link rel="stylesheet" type="text/css" href="css/test.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">

    <style>
       input:read-only {
        background-color: #ddd;
        pointer-events: none;
        }
    </style>

    <!--Jquery Cdn-->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
   
    <script>
        function updatePrice(productId) {
            var quantity = document.getElementsByName('quantity')[productId-1].value;
            var price = parseInt(document.getElementsByClassName('price')[productId-1].innerHTML.replace(',', ''));
            var total = quantity * price;
            document.getElementsByClassName('total')[productId-1].innerHTML = total.toLocaleString();
        }

        function addToCart(productId) {
            var quantity = document.getElementsByName('quantity')[productId-1].value;
            var price = parseInt(document.getElementsByClassName('price')[productId-1].innerHTML.replace(',', ''));
            var total = quantity * price;
            localStorage.setItem(productId, quantity);
            alert('장바구니에 추가되었습니다. 총 가격: ' + total.toLocaleString() + '원');
            updatePrice(productId);
        }

        function loadCart() {
            var cart = {};
            for (var i = 0; i < localStorage.length; i++) {
                var key = localStorage.key(i);
                cart[key] = localStorage.getItem(key);
            }
            return cart;
        }

        function updateCart(productId, quantity) {
            if (quantity == 0) {
                localStorage.removeItem(productId);
            } else {
                localStorage.setItem(productId, quantity);
            }
        }

        function checkout() {
            // 주문 정보를 수집하고, 데이터베이스에 저장하는 코드
            alert('주문이 완료되었습니다.');
            localStorage.clear();
            window.location.href = 'index.html';
        }

       

    </script>
    

</head>
<body>
   <div class="container-600">
        <div class="row">
            <h1>상품 리스트</h1>
            <ul>
                <li>
                    <h2>상품 1</h2>
                    <p>가격: <span class="row price">10,000</span>원</p>
                    <p>수량: <input type="number" name="quantity" value="1" min="1" onchange="updatePrice(1)"></p>
                    <p>총 가격: <span class="total">10,000</span>원</p>
                    <button onclick="addToCart(1)">장바구니에 담기</button>
                </li>
                <li>
                    <h2>상품 2</h2>
                    <p>가격: <span class="price">20,000</span>원</p>
                    <p>수량: <input type="number" name="quantity" value="1" min="1" onchange="updatePrice(2)"></p>
                    <p>총 가격: <span class="total">20,000</span>원</p>
                    <button onclick="addToCart(2)">장바구니에 담기</button>
                </li>
            </ul>
            <a href="#">장바구니 보기</a>
        </div>
      
   </div>
</body>    
</html>